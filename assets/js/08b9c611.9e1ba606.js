"use strict";(self.webpackChunkarrower_org=self.webpackChunkarrower_org||[]).push([[4972],{3609:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>c,default:()=>p,frontMatter:()=>d,metadata:()=>s,toc:()=>g});var r=n(5893),o=n(1151),a=n(4316);const i='package main\n\nimport (\n\t"context"\n\t"fmt"\n\t"log/slog"\n\n\t"github.com/go-arrower/arrower"\n)\n\ntype MyJob struct {\n\tPayload string\n}\n\nfunc main() {\n\ta, err := arrower.New()\n\tif err != nil {\n\t\tpanic(err)\n\t}\n\n\t// highlight-start\n\terr = a.DefaultQueue.RegisterJobFunc(func(ctx context.Context, job MyJob) error {\n\t\ta.Logger.InfoContext(ctx, "process job with data", slog.String("payload", job.Payload))\n\t\treturn nil\n\t})\n\t// highlight-end\n\tif err != nil {\n\t\tpanic(err)\n\t}\n\n\t// highlight-next-line\n\terr = a.DefaultQueue.Schedule("@every 1m", MyJob{Payload: "cron payload"})\n\tif err != nil {\n\t\tpanic(err)\n\t}\n\n\ta.WebRouter.Logger.Fatal(a.WebRouter.Start(fmt.Sprintf(":%d", a.Config.HTTP.Port)))\n}\n',d={},c="Cron",s={id:"guides/cron/index",title:"Cron",description:"Schedule a repeating job",source:"@site/docs/guides/cron/index.md",sourceDirName:"guides/cron",slug:"/guides/cron/",permalink:"/docs/guides/cron/",draft:!1,unlisted:!1,editUrl:"https://github.com/go-arrower/arrower.org/tree/master/docs/guides/cron/index.md",tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Guides",permalink:"/docs/guides/"},next:{title:"Extend a Repository",permalink:"/docs/guides/extend-repository/"}},l={},g=[{value:"Schedule a repeating job",id:"schedule-a-repeating-job",level:2}];function u(e){const t={code:"code",h1:"h1",h2:"h2",p:"p",pre:"pre",strong:"strong",...(0,o.a)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(t.h1,{id:"cron",children:"Cron"}),"\n",(0,r.jsx)(t.h2,{id:"schedule-a-repeating-job",children:"Schedule a repeating job"}),"\n",(0,r.jsx)(a.Z,{language:"go",title:"cron.go",children:i}),"\n",(0,r.jsx)(t.p,{children:(0,r.jsx)(t.strong,{children:"Output"})}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{children:'time=2024-06-15T19:02:12.311+02:00 level=INFO msg="process job with data" payload="cron payload" trace_id=4c37383f62cbbf8224abe785aa487d9f span_id=851d1b9da711fc99 job_id=01J0EDHFTWW6M775MF24HZ7E74\ntime=2024-06-15T19:03:12.313+02:00 level=INFO msg="process job with data" payload="cron payload" trace_id=3a524a0ca29d9028b40be03702998f21 span_id=add68136e1c46162 job_id=01J0EDHFTWW6M775MF25PPE49R\ntime=2024-06-15T19:04:12.313+02:00 level=INFO msg="process job with data" payload="cron payload" trace_id=b2b950cf3a96f3119c32cfd39768fda2 span_id=dd6ad5a42b26124d job_id=01J0EDHFTX833DHQA7YCGP3EM7\n...\n'})})]})}function p(e={}){const{wrapper:t}={...(0,o.a)(),...e.components};return t?(0,r.jsx)(t,{...e,children:(0,r.jsx)(u,{...e})}):u(e)}}}]);