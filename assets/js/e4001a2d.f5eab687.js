"use strict";(self.webpackChunkarrower_org=self.webpackChunkarrower_org||[]).push([[3151],{7986:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>c,contentTitle:()=>s,default:()=>f,frontMatter:()=>i,metadata:()=>a,toc:()=>u});var t=r(5893),o=r(1151);const i={},s="Configuration",a={id:"basics/configuration/index",title:"Configuration",description:"Arrower uses viper for configuration.",source:"@site/docs/basics/06-configuration/index.md",sourceDirName:"basics/06-configuration",slug:"/basics/configuration/",permalink:"/docs/basics/configuration/",draft:!1,unlisted:!1,editUrl:"https://github.com/go-arrower/arrower.org/tree/master/docs/basics/06-configuration/index.md",tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Web Interface",permalink:"/docs/basics/jobs/ui"},next:{title:"Observability",permalink:"/docs/basics/observability/"}},c={},u=[];function l(e){const n={a:"a",code:"code",h1:"h1",p:"p",pre:"pre",...(0,o.a)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.h1,{id:"configuration",children:"Configuration"}),"\n",(0,t.jsxs)(n.p,{children:["Arrower uses ",(0,t.jsx)(n.a,{href:"https://github.com/spf13/viper",children:"viper"})," for configuration.\nSo you can be flexible in how you set up your app to build and ship what you want."]}),"\n",(0,t.jsx)(n.p,{children:"Arrower ships with its own config that has everything to get you started with\nan empty project."}),"\n",(0,t.jsx)(n.p,{children:"In the most cases you want to roll your own config, to support exactly what you need.\nIt is seamless to extend the Arrower config to your needs:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-go",metastring:'title="shared/infrastructure/config/config.go"',children:'type MyConfig struct {\n    // highlight-next-line\n\tarrower.Config `mapstructure:",squash"`\n\tYourKey        string `mapstructure:"your-key"`\n}\n\nfunc Load(cfgFile string) (*Config, error) {\n  // highlight-next-line\n  vip := arrower.DefaultViper()\n\n  // Priority 2: default values\n  vip.SetDefault("", nil)\n  // Priority 1: config file values\n  vip.SetConfigFile(cfgFile)\n  // Priority 0: environment variables values\n  vip.SetEnvPrefix("YourAppsName")\n  \n  // ...\n  \n  config := Config{}\n\n  // highlight-next-line\n  err := vip.Unmarshal(&config)\n  \n  return &config, nil\n}\n'})}),"\n",(0,t.jsx)(n.p,{children:"This is an example of a Arrower configuration file.\nJust add your own configuration according to your needs."}),"\n",(0,t.jsx)(n.p,{children:"Familiarise yourself with viper's precedence order.\nIn the following example of a configuration file for the test environment,\nonly the required keys are set, and other keys fall back to the configured defaults."}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-yaml",metastring:'title=".config/your-config_test.config.yaml"',children:"environment: test\n\npostgres:\n  user: arrower\n  password: secret\n  database: arrower_test\n  host: localhost\n  port: 5432\n  sslmode: disable\n  max_conns: 10\n\n// highlight-next-line\nyour-key: your-value\n"})})]})}function f(e={}){const{wrapper:n}={...(0,o.a)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(l,{...e})}):l(e)}},1151:(e,n,r)=>{r.d(n,{Z:()=>a,a:()=>s});var t=r(7294);const o={},i=t.createContext(o);function s(e){const n=t.useContext(i);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:s(e.components),t.createElement(i.Provider,{value:n},e.children)}}}]);