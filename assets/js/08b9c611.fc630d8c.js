"use strict";(self.webpackChunkarrower_org=self.webpackChunkarrower_org||[]).push([[4972],{2677:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>c,default:()=>p,frontMatter:()=>d,metadata:()=>s,toc:()=>u});var r=n(5893),a=n(1151),o=n(8117);const i='package main\n\nimport (\n\t"context"\n\t"fmt"\n\t"log/slog"\n\n\t"github.com/go-arrower/arrower"\n)\n\ntype MyJob struct {\n\tPayload string\n}\n\nfunc main() {\n\ta, _, err := arrower.New()\n\tif err != nil {\n\t\tpanic(err)\n\t}\n\n\t// highlight-start\n\terr = a.DefaultQueue.RegisterJobFunc(func(ctx context.Context, job MyJob) error {\n\t\ta.Logger.InfoContext(ctx, "process job with data", slog.String("payload", job.Payload))\n\t\treturn nil\n\t})\n\t// highlight-end\n\tif err != nil {\n\t\tpanic(err)\n\t}\n\n\t// highlight-next-line\n\terr = a.DefaultQueue.Schedule("@every 1m", MyJob{Payload: "cron payload"})\n\tif err != nil {\n\t\tpanic(err)\n\t}\n\n\ta.WebRouter.Logger.Fatal(a.WebRouter.Start(fmt.Sprintf(":%d", a.Config.Web.Port)))\n}\n',d={},c="Cron",s={id:"guides/cron/index",title:"Cron",description:"Schedule a repeating job",source:"@site/docs/guides/cron/index.md",sourceDirName:"guides/cron",slug:"/guides/cron/",permalink:"/docs/guides/cron/",draft:!1,unlisted:!1,editUrl:"https://github.com/go-arrower/arrower.org/tree/master/docs/guides/cron/index.md",tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Guides",permalink:"/docs/guides/"},next:{title:"Run Jobs",permalink:"/docs/guides/run-jobs/"}},l={},u=[{value:"Schedule a repeating job",id:"schedule-a-repeating-job",level:2},{value:"Output",id:"output",level:3}];function g(e){const t={code:"code",h1:"h1",h2:"h2",h3:"h3",pre:"pre",...(0,a.a)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(t.h1,{id:"cron",children:"Cron"}),"\n",(0,r.jsx)(t.h2,{id:"schedule-a-repeating-job",children:"Schedule a repeating job"}),"\n",(0,r.jsx)(o.Z,{language:"go",title:"cron.go",children:i}),"\n",(0,r.jsx)(t.h3,{id:"output",children:"Output"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{children:'time=2024-06-15T19:02:12.311+02:00 level=INFO msg="process job with data" payload="cron payload" traceID=4c37383f62cbbf8224abe785aa487d9f spanID=851d1b9da711fc99 jobID=01J0EDHFTWW6M775MF24HZ7E74\ntime=2024-06-15T19:02:13.313+02:00 level=INFO msg="process job with data" payload="cron payload" traceID=3a524a0ca29d9028b40be03702998f21 spanID=add68136e1c46162 jobID=01J0EDHFTWW6M775MF25PPE49R\ntime=2024-06-15T19:02:14.313+02:00 level=INFO msg="process job with data" payload="cron payload" traceID=b2b950cf3a96f3119c32cfd39768fda2 spanID=dd6ad5a42b26124d jobID=01J0EDHFTX833DHQA7YCGP3EM7\n...\n'})})]})}function p(e={}){const{wrapper:t}={...(0,a.a)(),...e.components};return t?(0,r.jsx)(t,{...e,children:(0,r.jsx)(g,{...e})}):g(e)}}}]);