<!doctype html>
<html lang="en" dir="ltr" class="mdx-wrapper mdx-page plugin-pages plugin-id-default" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.0.1">
<title data-rh="true">Methodik | Arrower</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://arrower.org/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://arrower.org/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://arrower.org/methodik"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docusaurus_tag" content="default"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docsearch:docusaurus_tag" content="default"><meta data-rh="true" property="og:title" content="Methodik | Arrower"><meta data-rh="true" name="description" content="Recommendations. It&#x27;s required you think for yourself."><meta data-rh="true" property="og:description" content="Recommendations. It&#x27;s required you think for yourself."><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://arrower.org/methodik"><link data-rh="true" rel="alternate" href="https://arrower.org/methodik" hreflang="en"><link data-rh="true" rel="alternate" href="https://arrower.org/methodik" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Arrower RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Arrower Atom Feed">

<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-B5NQ6P46Q8"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-B5NQ6P46Q8",{anonymize_ip:!0})</script><link rel="stylesheet" href="/assets/css/styles.31918956.css">
<script src="/assets/js/runtime~main.2e0f69ba.js" defer="defer"></script>
<script src="/assets/js/main.b642a129.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_gu5v" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.svg" alt="Arrower Logo" class="themedComponent_ZRzL themedComponent--light_dGsa"><img src="/img/logo.svg" alt="Arrower Logo" class="themedComponent_ZRzL themedComponent--dark_pzCA"></div><b class="navbar__title text--truncate">Arrower</b></a><a class="navbar__item navbar__link" href="/docs/why">Docs</a><a class="navbar__item navbar__link" href="/leuchtturm">Leuchtturm</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/methodik">Methodik</a><a class="navbar__item navbar__link" href="/code-style">Code Style</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/go-arrower/arrower" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_T11m"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_kWbt colorModeToggle_GwZs"><button class="clean-btn toggleButton_fOL9 toggleButtonDisabled_STpu" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_DCeJ"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_DFgp"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_IP3a"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_IbdI"><main class="container container--fluid margin-vert--lg"><div class="row mdxPageWrapper_TZLa"><div class="col col--8"><article><h1>Methodik</h1>
<p>Recommendations. It&#x27;s required you think for yourself.</p>
<h2 class="anchor anchorWithStickyNavbar_FNw8" id="testing">Testing<a href="#testing" class="hash-link" aria-label="Direct link to Testing" title="Direct link to Testing">​</a></h2>
<p>What are your drivers that require you to test?
And on which granularity do you want to test?
At which time do you test?
Are you working on a prototype or a multi-team enterprise software system?</p>
<p>There are many reasons and goals to test for:</p>
<ul>
<li>Correctness</li>
<li>Security</li>
<li>Performance</li>
<li>Degree of distribution of the system under test</li>
</ul>
<p>From Arrower&#x27;s perspective, the goal of testing is to <strong>feel confident about deploying to production</strong>.<br>
<!-- -->With that here are some arrows, and you go and use them.</p>
<h3 class="anchor anchorWithStickyNavbar_FNw8" id="methods-and-practices">Methods and Practices<a href="#methods-and-practices" class="hash-link" aria-label="Direct link to Methods and Practices" title="Direct link to Methods and Practices">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_FNw8" id="use-go-testing-toolchain">Use Go Testing Toolchain<a href="#use-go-testing-toolchain" class="hash-link" aria-label="Direct link to Use Go Testing Toolchain" title="Direct link to Use Go Testing Toolchain">​</a></h4>
<div class="language-go codeBlockContainer_aalF theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_MHx8"><pre tabindex="0" class="prism-code language-go codeBlock_zHgq thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_RjmQ"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// run all unit tests</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">go</span><span class="token plain"> test </span><span class="token punctuation" style="color:#393A34">.</span><span class="token operator" style="color:#393A34">/</span><span class="token operator" style="color:#393A34">...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// run all unit tests with the race detector</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">go</span><span class="token plain"> test </span><span class="token operator" style="color:#393A34">-</span><span class="token plain">race </span><span class="token punctuation" style="color:#393A34">.</span><span class="token operator" style="color:#393A34">/</span><span class="token operator" style="color:#393A34">...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// define tags to isolate long running or expensive tests</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">go</span><span class="token plain"> test </span><span class="token operator" style="color:#393A34">-</span><span class="token plain">race </span><span class="token operator" style="color:#393A34">--</span><span class="token plain">tags</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;integration&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">.</span><span class="token operator" style="color:#393A34">/</span><span class="token operator" style="color:#393A34">...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// get coverage reports</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">go</span><span class="token plain"> test </span><span class="token operator" style="color:#393A34">-</span><span class="token plain">race </span><span class="token operator" style="color:#393A34">--</span><span class="token plain">tags</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;integration&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">.</span><span class="token operator" style="color:#393A34">/</span><span class="token operator" style="color:#393A34">...</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-</span><span class="token plain">coverprofile cover</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">out</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">go</span><span class="token plain"> tool cover </span><span class="token operator" style="color:#393A34">-</span><span class="token plain">html</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">cover</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">out </span><span class="token operator" style="color:#393A34">-</span><span class="token plain">o cover</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">html</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> xdg</span><span class="token operator" style="color:#393A34">-</span><span class="token plain">open cover</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">html</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">go</span><span class="token plain"> tool cover </span><span class="token operator" style="color:#393A34">-</span><span class="token keyword" style="color:#00009f">func</span><span class="token plain"> cover</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">out </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> grep total</span><span class="token punctuation" style="color:#393A34">:</span><br></span></code></pre><div class="buttonGroup_Sd8_"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_LnQD" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_t3l1"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_IiZV"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_FNw8" id="definition-of-unit-under-test">Definition of Unit Under Test<a href="#definition-of-unit-under-test" class="hash-link" aria-label="Direct link to Definition of Unit Under Test" title="Direct link to Definition of Unit Under Test">​</a></h4>
<p>Answering this question for you will direct your efforts on where and how much to test.</p>
<ul>
<li>Focus on the public API over implementation details</li>
<li>Find the right amount of tests for the right level of the testing pyramid</li>
<li>Enabled by <a href="#blackbox-testing">Blackbox Testing</a></li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_FNw8" id="blackbox-testing">Blackbox Testing<a href="#blackbox-testing" class="hash-link" aria-label="Direct link to Blackbox Testing" title="Direct link to Blackbox Testing">​</a></h4>
<p>Blackbox testing prevents from testing implementation details.</p>
<table><thead><tr><th>Bad</th><th>Good</th></tr></thead><tbody><tr><td><div class="language-go codeBlockContainer_aalF theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_MHx8"><pre tabindex="0" class="prism-code language-go codeBlock_zHgq thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_RjmQ"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">package</span><span class="token plain"> foo</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">func</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">TestNew</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">t </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">testing</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">T</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    s </span><span class="token operator" style="color:#393A34">:=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">New</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">//...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup_Sd8_"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_LnQD" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_t3l1"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_IiZV"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></td><td><div class="language-go codeBlockContainer_aalF theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_MHx8"><pre tabindex="0" class="prism-code language-go codeBlock_zHgq thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_RjmQ"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">package</span><span class="token plain"> foo_test</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">func</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">TestNew</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">t </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">testing</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">T</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    s </span><span class="token operator" style="color:#393A34">:=</span><span class="token plain"> foo</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">New</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">//...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup_Sd8_"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_LnQD" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_t3l1"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_IiZV"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></td></tr></tbody></table>
<p>Use the linter <code>testpackage</code> to ensure always testing the api as a system under test.</p>
<p>Whitebox testing has its place, use it where necessary.
E.g. when the complexity of the functions warrants it.
The main goal is support easy refactoring.
Consider a naming schema for test files that use whitebox testing by adding a <code>_wb_test.go</code> postfix.</p>
<h4 class="anchor anchorWithStickyNavbar_FNw8" id="nest-cases-with-subtests">Nest Cases With Subtests<a href="#nest-cases-with-subtests" class="hash-link" aria-label="Direct link to Nest Cases With Subtests" title="Direct link to Nest Cases With Subtests">​</a></h4>
<ul>
<li>Name each subtest</li>
<li>Subtests can nest further</li>
<li>Subtests can share shared test preparations</li>
<li>Combines with <a href="#use-go-testing-toolchain">Use Go Testing Toolchain</a>
<ul>
<li>Target individual subtests <br>
<code>go test -run=TestAdd/add</code></li>
<li>The Go tool output lists all the run subtests</li>
</ul>
</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_FNw8" id="table-driven-tests--parameterised-tests">Table Driven Tests / Parameterised Tests<a href="#table-driven-tests--parameterised-tests" class="hash-link" aria-label="Direct link to Table Driven Tests / Parameterised Tests" title="Direct link to Table Driven Tests / Parameterised Tests">​</a></h4>
<ul>
<li>Good to visually to see easily if all cases are considered</li>
<li>Name each subtest (self describing tests)</li>
<li>Setup table driven tests even for one example,
as it will be so easy to extend.
Setting up table driven tests later on is so hard to do it if it is not there already</li>
<li>In case of a regression, add a test case easily.</li>
</ul>
<div class="language-go codeBlockContainer_aalF theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_MHx8"><pre tabindex="0" class="prism-code language-go codeBlock_zHgq thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_RjmQ"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">func</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">TestAdd</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">t </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">testing</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">T</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    tests </span><span class="token operator" style="color:#393A34">:=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">map</span><span class="token punctuation" style="color:#393A34">[</span><span class="token builtin">string</span><span class="token punctuation" style="color:#393A34">]</span><span class="token keyword" style="color:#00009f">struct</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> a</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> b</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> res </span><span class="token builtin">int</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">&quot;add&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> name</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> tc </span><span class="token operator" style="color:#393A34">:=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">range</span><span class="token plain"> tests </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        t</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Run</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">name</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">func</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">t </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">testing</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">T</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token comment" style="color:#999988;font-style:italic">//...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup_Sd8_"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_LnQD" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_t3l1"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_IiZV"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_FNw8" id="use-assert-library">Use Assert Library<a href="#use-assert-library" class="hash-link" aria-label="Direct link to Use Assert Library" title="Direct link to Use Assert Library">​</a></h4>
<p>Don&#x27;t use the got != expected pattern introduced by Go, use an assertion library, like <code>github.com/stretchr/testify</code>.</p>
<h4 class="anchor anchorWithStickyNavbar_FNw8" id="avoid-mocks">Avoid Mocks<a href="#avoid-mocks" class="hash-link" aria-label="Direct link to Avoid Mocks" title="Direct link to Avoid Mocks">​</a></h4>
<p>Prevent the use of mocks, as they make testing complicated and cumbersome
⇒ Use in memory implementations instead, see <a href="/docs/basics/testing#unit-testing">Repository helper</a> or <a href="/docs/basics/jobs#testing">Queue</a></p>
<p>Other steps to take:</p>
<ul>
<li>If testing a network service, start a copy of the service locally and open a proper network connection</li>
<li>Use integration tests (against <a href="/docs/basics/testing#integration-testing">running docker containers</a>)</li>
<li>See Subprocessing of Hashicorp</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_FNw8" id="test-fixtures">Test Fixtures<a href="#test-fixtures" class="hash-link" aria-label="Direct link to Test Fixtures" title="Direct link to Test Fixtures">​</a></h4>
<ul>
<li>Go test sets the relative path so in the tests you can access local files, e.g. in <code>testdata/fixtures</code></li>
<li>Store testdata in <code>testdata/testdata.go</code> or <code>./testdata_test.go</code> (should last one survive?)</li>
<li>todo: templating db fixture files</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_FNw8" id="golden-files">Golden Files<a href="#golden-files" class="hash-link" aria-label="Direct link to Golden Files" title="Direct link to Golden Files">​</a></h4>
<ul>
<li>For complex test output, so it can be read and worked with on its own, instead of in the test code.</li>
<li>Update the golden files via <code>go test -update</code></li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_FNw8" id="test-flags">Test Flags<a href="#test-flags" class="hash-link" aria-label="Direct link to Test Flags" title="Direct link to Test Flags">​</a></h4>
<ul>
<li>Test falgs work as flags for golden files, use them for expensive or slow tests</li>
<li><code>go test -yourFlag</code></li>
<li>Q: how does this compare or keep up with go build tags for e.g. integration or acceptance testing?</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_FNw8" id="avoid-global-state">Avoid Global State<a href="#avoid-global-state" class="hash-link" aria-label="Direct link to Avoid Global State" title="Direct link to Avoid Global State">​</a></h4>
<h4 class="anchor anchorWithStickyNavbar_FNw8" id="testhelpers">Testhelpers<a href="#testhelpers" class="hash-link" aria-label="Direct link to Testhelpers" title="Direct link to Testhelpers">​</a></h4>
<ul>
<li>Never return an error =&gt; fail the test via the t methods.</li>
<li>Use t.Helper (or enforce by arrower linter recommendations)</li>
<li>Return closure for cleanup work</li>
<li>Fail at once functions:
e.g. create an echo server to be proper test helpers,
so they can fail in case of an issue (and don&#x27;t have to ignore errors)</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_FNw8" id="testing-as-public-api">Testing as Public API<a href="#testing-as-public-api" class="hash-link" aria-label="Direct link to Testing as Public API" title="Direct link to Testing as Public API">​</a></h4>
<ul>
<li>testing.go file or testing_*.go that is compiled with the actual program</li>
<li>provide mocks, test harnesses, helpers ect. (how does this work with the testdata from above?)<!-- -->
<ul>
<li>Prefix with <code>Test</code> instead of <code>New</code></li>
</ul>
</li>
<li>Test all the properties of the implementation e.g. Queue (postgres vs. in memory)</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_FNw8" id="run-tests">Run Tests<a href="#run-tests" class="hash-link" aria-label="Direct link to Run Tests" title="Direct link to Run Tests">​</a></h4>
<p>There are ways to make testing easy.
But it is essential to run the tests:</p>
<ul>
<li>regularly</li>
<li>locally</li>
<li>automated in the pipeline</li>
</ul>
<p>Prevent from skipping failing tests, as this lays the ground for more behaviour like it.</p>
<h4 class="anchor anchorWithStickyNavbar_FNw8" id="testing-is-a-mindset">Testing is a Mindset<a href="#testing-is-a-mindset" class="hash-link" aria-label="Direct link to Testing is a Mindset" title="Direct link to Testing is a Mindset">​</a></h4>
<img src="/assets/images/methodik_tester-6d1e785871c3b5db6bd53bfb5782a3ae.jpg" alt="Testing is a mindset">
<hr>
<h3 class="anchor anchorWithStickyNavbar_FNw8" id="notes-on-additional-topics">Notes on additional topics<a href="#notes-on-additional-topics" class="hash-link" aria-label="Direct link to Notes on additional topics" title="Direct link to Notes on additional topics">​</a></h3>
<ul>
<li>high test coverage for application and business logic</li>
<li>Localise your tests, to keep them easy to read and debug in case of failure (over clever function calling in other files ect... prevent mental context building)</li>
<li>Unconfigurable behaviour is a point of issue for tests =&gt; make structs configurable<!-- -->
<ul>
<li>If you don&#x27;t want to export: make the fields private and use whitebox testing</li>
<li><code>Test bool</code> so e.g. web app can pass auth login as same person (investigate if this is really a good idea in terms of security?)</li>
</ul>
</li>
<li>DeepEqual alternatives</li>
<li>TODO: create helper in tests to ensure Fields do not change unknowingly when mapping structs between layers (with golden file as reference)</li>
<li>Test data generation (?)</li>
</ul>
<p>Zim Notes on testing
What to test and what not to test? e.g. controller</p>
<h3 class="anchor anchorWithStickyNavbar_FNw8" id="resources">Resources<a href="#resources" class="hash-link" aria-label="Direct link to Resources" title="Direct link to Resources">​</a></h3>
<p>[1] <a href="https://www.youtube.com/watch?v=8hQG7QlcLBk" target="_blank" rel="noopener noreferrer">https://www.youtube.com/watch?v=8hQG7QlcLBk</a> - Advanced Testing with Go by Hashimoto 2017<br>
<!-- -->[2] <a href="https://www.reddit.com/r/golang/comments/vfxs3u/beyond_hashimotos_advanced_testing_with_go/" target="_blank" rel="noopener noreferrer">https://www.reddit.com/r/golang/comments/vfxs3u/beyond_hashimotos_advanced_testing_with_go/</a> - 2022 updates to [1]<br>
<!-- -->[3] <a href="https://quii.gitbook.io/learn-go-with-tests/" target="_blank" rel="noopener noreferrer">https://quii.gitbook.io/learn-go-with-tests/</a> - Introduction into TDD and ideas on how to test complicated things like io or time</p></article></div><div class="col col--2"><div class="tableOfContents_IS5x thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#testing" class="table-of-contents__link toc-highlight">Testing</a><ul><li><a href="#methods-and-practices" class="table-of-contents__link toc-highlight">Methods and Practices</a><ul><li><a href="#use-go-testing-toolchain" class="table-of-contents__link toc-highlight">Use Go Testing Toolchain</a></li><li><a href="#definition-of-unit-under-test" class="table-of-contents__link toc-highlight">Definition of Unit Under Test</a></li><li><a href="#blackbox-testing" class="table-of-contents__link toc-highlight">Blackbox Testing</a></li><li><a href="#nest-cases-with-subtests" class="table-of-contents__link toc-highlight">Nest Cases With Subtests</a></li><li><a href="#table-driven-tests--parameterised-tests" class="table-of-contents__link toc-highlight">Table Driven Tests / Parameterised Tests</a></li><li><a href="#use-assert-library" class="table-of-contents__link toc-highlight">Use Assert Library</a></li><li><a href="#avoid-mocks" class="table-of-contents__link toc-highlight">Avoid Mocks</a></li><li><a href="#test-fixtures" class="table-of-contents__link toc-highlight">Test Fixtures</a></li><li><a href="#golden-files" class="table-of-contents__link toc-highlight">Golden Files</a></li><li><a href="#test-flags" class="table-of-contents__link toc-highlight">Test Flags</a></li><li><a href="#avoid-global-state" class="table-of-contents__link toc-highlight">Avoid Global State</a></li><li><a href="#testhelpers" class="table-of-contents__link toc-highlight">Testhelpers</a></li><li><a href="#testing-as-public-api" class="table-of-contents__link toc-highlight">Testing as Public API</a></li><li><a href="#run-tests" class="table-of-contents__link toc-highlight">Run Tests</a></li><li><a href="#testing-is-a-mindset" class="table-of-contents__link toc-highlight">Testing is a Mindset</a></li></ul></li><li><a href="#notes-on-additional-topics" class="table-of-contents__link toc-highlight">Notes on additional topics</a></li><li><a href="#resources" class="table-of-contents__link toc-highlight">Resources</a></li></ul></li></ul></div></div></div></main></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs/why">Why Arrower?</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/getting-started">Getting Started</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://twitter.com/arrower_org" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_T11m"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://discord.gg/3Aukzde8Sg" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_T11m"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/go-arrower/arrower" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_T11m"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Arrower 2024</div></div></div></footer></div>
</body>
</html>